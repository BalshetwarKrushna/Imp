// Bresenham Line Drawing with styles
#include <GL/glut.h>
#include <iostream>
#include <cmath>
using namespace std;

int x_start, y_start, x_end, y_end;
int style = 1;  // 1 = Simple, 2 = Dashed, 3 = Dotted, 4 = Solid

void plot(int x, int y) {
    glBegin(GL_POINTS);
    glVertex2i(x, y);
    glEnd();
}

void bresenhamLine() {
    int dx = abs(x_end - x_start);
    int dy = abs(y_end - y_start);
    int sx = (x_start < x_end) ? 1 : -1;
    int sy = (y_start < y_end) ? 1 : -1;
    int err = dx - dy;
    int x = x_start, y = y_start, count = 0;

    while (true) {
        bool draw = false;
        if (style == 1) draw = true;
        else if (style == 2 && (count / 5) % 2 == 0) draw = true;
        else if (style == 3 && count % 5 == 0) draw = true;
        else if (style == 4) draw = true;

        if (draw) plot(x, y);

        if (x == x_end && y == y_end) break;

        int e2 = 2 * err;
        if (e2 > -dy) {
            err -= dy;
            x += sx;
        }
        if (e2 < dx) {
            err += dx;
            y += sy;
        }
        count++;
    }
}

void drawAxes() {
    glColor3f(0, 0, 0);
    glBegin(GL_LINES);
    glVertex2i(-500, 0); glVertex2i(500, 0); // X-axis
    glVertex2i(0, -500); glVertex2i(0, 500); // Y-axis
    glEnd();
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);
    drawAxes();
    glColor3f(1, 0, 0); // Red line
    bresenhamLine();
    glFlush();
}

void init() {
    glClearColor(1, 1, 1, 1); // White background
    glColor3f(0, 0, 0);
    gluOrtho2D(-500, 500, -500, 500);
}

int main(int argc, char** argv) {
    cout << "--- Bresenham Line Drawing ---" << endl;
    cout << "Enter starting coordinates (x y): ";
    cin >> x_start >> y_start;
    cout << "Enter ending coordinates (x y): ";
    cin >> x_end >> y_end;
    cout << "Choose line style:\n1. Simple\n2. Dashed\n3. Dotted\n4. Solid\nYour choice: ";
    cin >> style;

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(800, 800);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("Bresenham Line Drawing");
    init();
    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
}
//g++ k.cpp -lGL -lGLU -lglut
//./a.out